{% extends '::base.html.twig' %}

{% block stylesheets %}

    {{ parent() }}

    {# SELECT2 #}
    <link href="{{ asset('public/assets/global/plugins/select2/css/select2.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('public/assets/global/plugins/select2/css/select2-bootstrap.min.css') }}" rel="stylesheet" type="text/css" />

    {# SPINNER BUTTONS Y MATERIAL DESIGN #}
    <link href="{{ asset('public/assets/global/css/components-md.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('public/assets/global/css/plugins-md.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('public/assets/global/plugins/ladda/ladda-themeless.min.css') }}" rel="stylesheet" type="text/css" />

    {# SELECT2 #}
    <link href="{{ asset('public/assets/global/plugins/select2/css/select2.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('public/assets/global/plugins/select2/css/select2-bootstrap.min.css') }}" rel="stylesheet" type="text/css" />

    {# TOASTR NOTIFICATIONS #}
    <link href="{{ asset('public/assets/global/plugins/bootstrap-toastr/toastr.min.css') }}" rel="stylesheet" type="text/css" />

{% endblock %}

{% block pagecontent %}

    {% for flash_message in app.session.flashBag.get('success') %}
        <input class="successFlashMessage" value="{{ flash_message }}" hidden>
    {% endfor %}

    {% for flash_message in app.session.flashBag.get('alert') %}
        <input class="alertFlashMessage" value="{{ flash_message }}" hidden>
    {% endfor %}

    {% for flash_message in app.session.flashBag.get('error') %}
        <input class="errorFlashMessage" value="{{ flash_message }}" hidden>
    {% endfor %}

    {{ form_start(form, { 'attr': {'class':'form-horizontal'} }) }}
    <div class="portlet-body">
        <div class="form-group form-md-line-input has-info">
            <div class="col-md-1"></div>
            {{ form_label(form.numero, 'Numero de Checklist', {
                'label_attr': {
                    'class': 'col-md-1 control-label',
                    'style': 'color: grey;'
                }
            }) }}
            <div class="col-md-2">
                <div class="input-icon">
                    {{ form_widget(form.numero, {
                        'attr': {
                            'class': 'form-control',
                            'placeholder': 'Nº Checklist'
                        }
                    }) }}
                    <div class="form-control-focus"> </div>
                    <span class="help-block">
                                            ingrese número de Checklist
                                        </span>
                    <i class="fa fa-sort-numeric-asc"></i>
                    <span class="help-block help-block-error" style="color: red;">
                                            {{ form_errors(form.numero) }}
                                        </span>
                </div>
            </div>
        </div>
        <div class="form-group form-md-line-input has-info">

            <div class="col-md-1"></div>
                {{ form_label(form.adjuntos, 'Adjunto', {
                    'label_attr': {
                        'class': 'col-md-1 control-label',
                        'style': 'color: grey;'
                    }
                }) }}
            <div class="col-md-6">
                {{ form_widget(form.adjuntos) }} <b>Peso máximo permitido del archivo PDF es 10MB.</b>
                <span class="help-block help-block-error" style="color: #ff0000;">
                    {{ form_errors(form.adjuntos) }}
                </span>
            </div>
    </div>

    {% if is_granted('ROLE_REPORTEDIARIO_ADMIN') %}
        <br>
        <div class="form-actions">
            <div class="col-md-offset-5">
                <button type="submit" data-loading-text="Loading..." class="btn btn-primary mt-ladda-btn ladda-button mt-progress-demo btn-circle" data-style="slide-right" id="establecimiento_razonsocial_save" name="establecimiento_razonsocial[save]">
                    <span class="ladda-label">
                        SUBIR
                    </span>
                </button>
            </div>
        </div>
    {% else %}
        <div class="form-actions">
            <div class="col-md-offset-5">
                <button type="button" data-loading-text="Loading..." class="btn grey mt-ladda-btn ladda-button mt-progress-demo btn-circle" data-style="slide-right">
                        <span class="ladda-label">
                            No Habilitado
                        </span>
                </button>
            </div>
        </div>
    {% endif %}

    {{ form_end(form) }}

{% endblock %}


{% block javascripts %}

    {{ parent() }}
    <script type="text/javascript">

       function getFileName(elm) {
           var fn = $(elm).val();
           var filename = fn.match(/[^\\/]*$/)[0]; // remove C:\fakename

           filename=filename.substring(filename.length-4);

           if(filename != '.pdf'){
               $(elm).val('');
               alert("archivo incorrecto, solo se permite pdf");
           }

        }


    </script>

    {# SPINNER BUTTONS #}
    <script src="{{ asset('public/assets/global/plugins/ladda/spin.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('public/assets/global/plugins/ladda/ladda.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('public/assets/pages/scripts/ui-buttons.min.js') }}" type="text/javascript"></script>

    {# SELECT2 #}
    <script src="{{ asset('public/assets/global/plugins/select2/js/select2.full.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('public/assets/pages/scripts/components-select2.min.js') }}" type="text/javascript"></script>

    {# TOASTR NOTIFICATIONS #}
    <script src="{{ asset('public/assets/global/plugins/bootstrap-toastr/toastr.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Js/CoreBundle/ui-toastr.js') }}" type="text/javascript"></script>


{% endblock %}